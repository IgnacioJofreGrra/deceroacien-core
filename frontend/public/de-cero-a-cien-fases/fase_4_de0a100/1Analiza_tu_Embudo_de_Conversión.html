<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Optimizador de Embudos de Conversi√≥n | El Camino Dorado</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0a1f2f;
            color: #e6f1ff;
        }
        .highlight-text { color: #FBBF24; }
        .tool-container { background-color: #112240; }
        .doc-container { background-color: #0a1f2f; }
        .action-button {
            background-color: #1E293B;
            color: #cbd5e1;
            padding: 8px 12px;
            border-radius: 6px;
            transition: all 0.3s ease;
            font-size: 0.875rem;
            font-weight: 600;
            border: 1px solid #334155;
            cursor: pointer;
        }
        .action-button:hover {
            background-color: #334155;
            color: #FBBF24;
        }
        .form-input {
            background-color: #0a1f2f;
            border: 1px solid #1e2d4d;
            color: #cbd5e1;
            width: 100%;
            padding: 10px;
            border-radius: 4px;
        }
        .form-input::placeholder { color: #475569; }
        .form-input:focus { outline: none; border-color: #FBBF24; }
        .primary-button {
            background-color: #FBBF24;
            color: #0a1f2f;
            font-weight: 700;
            padding: 10px 24px;
            border-radius: 6px;
            text-decoration: none;
            transition: background-color 0.3s ease;
            text-align: center;
            cursor: pointer;
        }
        .funnel-step {
            background-color: #0a1f2f;
            border: 1px solid #1e2d4d;
        }
        .conversion-rate {
            color: #FBBF24;
            font-weight: bold;
            text-align: center;
            padding: 8px 0;
            position: relative;
        }
        .conversion-rate::before {
            content: '‚Üì';
            display: block;
            margin-bottom: 4px;
            color: #64748b;
        }
    </style>
</head>
<body class="antialiased">

    <div class="sticky top-0 z-50 bg-[#0a192f]/80 backdrop-blur-lg border-b border-gray-800">
        <nav class="container mx-auto max-w-7xl px-6 py-3 flex justify-between items-center">
            <a href="../portal-alumno.html" class="text-lg font-bold highlight-text">‚Üê Volver al Centro de Formaci√≥n</a>
            <span class="text-sm text-slate-300">Bienvenido, [Nombre Alumno]</span>
        </nav>
    </div>

    <main class="container mx-auto max-w-7xl px-6 py-12" data-entitlement="decero.fase4">
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">

            <aside class="lg:col-span-1 doc-container p-6 rounded-lg">
                <h1 class="text-2xl font-black text-white">Optimizador de Embudos de Conversi√≥n</h1>
                <p class="text-sm highlight-text mt-1">Herramienta de la Fase 4: Crecimiento y Escalabilidad</p>
                
                <div class="mt-8 space-y-6 text-gray-400 text-sm">
                    <div>
                        <h2 class="font-bold text-slate-300 text-base">üéØ Objetivo</h2>
                        <p class="mt-1">Analizar y mejorar la tasa de conversi√≥n en cada paso del viaje de tu cliente, desde que te descubre hasta que se convierte en un cliente de pago.</p>
                    </div>
                    <div>
                        <h2 class="font-bold text-slate-300 text-base">‚≠ê Importancia</h2>
                        <p class="mt-1">Conseguir tr√°fico es caro. Perder ese tr√°fico por un "embudo con fugas" es un desperdicio de dinero. Optimizar tu embudo es una de las actividades de mayor impacto para aumentar los ingresos sin necesidad de aumentar tu gasto en marketing.</p>
                    </div>
                    <div>
                        <h2 class="font-bold text-slate-300 text-base">‚öôÔ∏è ¬øQu√© es lo que hace?</h2>
                        <p class="mt-1">Te permite definir los pasos de tu embudo de conversi√≥n (ej: Visita a la web -> Registro -> Compra). Al introducir el n√∫mero de usuarios en cada paso, la herramienta calcula autom√°ticamente la tasa de conversi√≥n entre etapas y la conversi√≥n total del embudo, mostr√°ndote exactamente d√≥nde se est√°n yendo los clientes.</p>
                    </div>
                    <div>
                        <h2 class="font-bold text-slate-300 text-base">üí° ¬øPara qu√© me sirve?</h2>
                        <p class="mt-1">Para identificar los mayores "agujeros" en tu proceso de ventas. Te ayuda a enfocar tus esfuerzos de optimizaci√≥n (con Pruebas A/B, por ejemplo) en los puntos que tendr√°n el mayor impacto en tu facturaci√≥n.</p>
                    </div>
                </div>
            </aside>

            <div class="lg:col-span-2 tool-container p-6 rounded-lg" data-when="granted">
                <div class="flex flex-wrap items-center justify-between pb-4 border-b border-gray-700 gap-4">
                    <h2 class="text-xl font-bold text-white">Analiza tu Embudo de Conversi√≥n</h2>
                     <div class="flex space-x-3">
                        <button class="action-button" onclick="guardar()">üíæ Guardar</button>
                        <button class="action-button" onclick="descargar()">üìÑ Descargar</button>
                        <button class="action-button" onclick="compartir()">üîó Compartir</button>
                        <button class="action-button" onclick="clearAll()">üóëÔ∏è Limpiar Embudo</button>
                    </div>
                </div>

                <div class="mt-6 bg-gray-900/50 p-4 rounded-lg">
                    <h3 class="font-semibold text-white">1. A√±ade un Paso al Embudo</h3>
                    <div class="mt-2 flex flex-wrap sm:flex-nowrap gap-4 items-end">
                        <div class="flex-grow">
                            <label for="step-name" class="text-xs text-gray-400">Nombre del Paso</label>
                            <input type="text" id="step-name" class="form-input" placeholder="Ej: Visita a la Landing Page">
                        </div>
                        <div class="w-full sm:w-48">
                            <label for="step-users" class="text-xs text-gray-400">N¬∫ de Usuarios en este Paso</label>
                            <input type="number" id="step-users" class="form-input" placeholder="Ej: 10000">
                        </div>
                        <button id="add-step-btn" class="primary-button w-full sm:w-auto">A√±adir Paso</button>
                    </div>
                </div>

                <div class="mt-6">
                     <h3 class="font-semibold text-white mb-4">2. Tu Embudo de Conversi√≥n</h3>
                     <div id="funnel-container" class="space-y-4">
                        <!-- Los pasos del embudo aparecer√°n aqu√≠ -->
                     </div>
                </div>
                 <div id="summary-section" class="mt-6 hidden">
                     <h3 class="font-semibold text-white mb-4">3. Resumen del Embudo</h3>
                     <div class="bg-gray-900/50 p-6 rounded-lg text-center">
                        <p class="text-sm text-gray-400">Tasa de Conversi√≥n Total</p>
                        <p id="total-conversion" class="text-5xl font-black my-2 highlight-text">0%</p>
                     </div>
                </div>
            </div>
        </div>
    </main>

    <script>
        const stepNameInput = document.getElementById('step-name');
        const stepUsersInput = document.getElementById('step-users');
        const addStepBtn = document.getElementById('add-step-btn');
        const funnelContainer = document.getElementById('funnel-container');
        const summarySection = document.getElementById('summary-section');
        const totalConversionEl = document.getElementById('total-conversion');

        let steps = [];
        let nextId = 0;

        function renderFunnel() {
            funnelContainer.innerHTML = '';
            if (steps.length === 0) {
                funnelContainer.innerHTML = `<p class="text-sm text-gray-500 text-center py-4">A√±ade el primer paso de tu embudo.</p>`;
                summarySection.classList.add('hidden');
                return;
            }

            steps.forEach((step, index) => {
                const stepEl = document.createElement('div');
                stepEl.className = 'funnel-step p-4 rounded-lg';
                stepEl.innerHTML = `
                    <div class="flex justify-between items-center">
                        <span class="font-semibold">${index + 1}. ${step.name}</span>
                        <div class="flex items-center gap-2">
                           <input type="number" value="${step.users}" oninput="updateUsers(${step.id}, this.value)" class="form-input !w-28 text-right">
                           <button class="action-button !p-1 text-xs !bg-red-800 hover:!bg-red-700" onclick="deleteStep(${step.id})">Borrar</button>
                        </div>
                    </div>
                `;
                funnelContainer.appendChild(stepEl);

                if (index < steps.length - 1) {
                    const nextStep = steps[index + 1];
                    const conversion = step.users > 0 ? (nextStep.users / step.users) * 100 : 0;
                    const conversionEl = document.createElement('div');
                    conversionEl.className = 'conversion-rate';
                    conversionEl.textContent = `${conversion.toFixed(1)}%`;
                    funnelContainer.appendChild(conversionEl);
                }
            });

            if (steps.length > 1) {
                const totalConversion = steps[0].users > 0 ? (steps[steps.length - 1].users / steps[0].users) * 100 : 0;
                totalConversionEl.textContent = `${totalConversion.toFixed(1)}%`;
                summarySection.classList.remove('hidden');
            } else {
                summarySection.classList.add('hidden');
            }
        }

        addStepBtn.addEventListener('click', () => {
            const name = stepNameInput.value.trim();
            const users = parseInt(stepUsersInput.value) || 0;

            if (!name || users <= 0) {
                alert('Por favor, introduce un nombre y un n√∫mero de usuarios v√°lido.');
                return;
            }
            steps.push({ id: nextId++, name, users });
            stepNameInput.value = '';
            stepUsersInput.value = '';
            renderFunnel();
        });

        function updateUsers(id, newUsers) {
            const step = steps.find(s => s.id === id);
            if (step) {
                step.users = parseInt(newUsers) || 0;
                renderFunnel();
            }
        }

        function deleteStep(id) {
            steps = steps.filter(s => s.id !== id);
            renderFunnel();
        }
        
        function clearAll() {
            if (confirm('¬øEst√°s seguro de que quieres borrar todos los pasos del embudo?')) {
                steps = [];
                renderFunnel();
            }
        }

        renderFunnel();

        function guardar() { alert('Funcionalidad "Guardar": ¬°Pr√≥ximamente!'); }
        function descargar() { alert('Funcionalidad "Descargar": ¬°Pr√≥ximamente!'); }
        function compartir() { alert('Funcionalidad "Compartir": ¬°Pr√≥ximamente!'); }
    </script>
    <script src="../../assets/js/components.js"></script>
</body>
</html>
