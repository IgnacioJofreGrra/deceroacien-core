<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora de Product-Market Fit | El Camino Dorado</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0a1f2f;
            color: #e6f1ff;
        }
        .highlight-text { color: #FBBF24; }
        .tool-container { background-color: #112240; }
        .doc-container { background-color: #0a1f2f; }
        .action-button {
            background-color: #1E293B;
            color: #cbd5e1;
            padding: 8px 12px;
            border-radius: 6px;
            transition: all 0.3s ease;
            font-size: 0.875rem;
            font-weight: 600;
            border: 1px solid #334155;
            cursor: pointer;
        }
        .action-button:hover {
            background-color: #334155;
            color: #FBBF24;
        }
    .form-input {
            background-color: #0a1f2f;
            border: 1px solid #1e2d4d;
            color: #cbd5e1;
            width: 100%;
            padding: 10px;
            border-radius: 4px;
        }
        .form-input::placeholder { color: #475569; }
        .form-input:focus { outline: none; border-color: #FBBF24; }
        .result-box {
            background-color: #0a1f2f;
            border: 1px solid #1e2d4d;
        }
    </style>
</head>
<body class="antialiased">

    <div class="sticky top-0 z-50 bg-[#0a192f]/80 backdrop-blur-lg border-b border-gray-800">
        <nav class="container mx-auto max-w-7xl px-6 py-3 flex justify-between items-center">
            <a href="../portal-alumno.html" class="text-lg font-bold highlight-text">‚Üê Volver al Centro de Formaci√≥n</a>
            <span class="text-sm text-slate-300">Bienvenido, [Nombre Alumno]</span>
        </nav>
    </div>

    <main class="container mx-auto max-w-7xl px-6 py-12" data-entitlement="decero.fase3">
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">

            <aside class="lg:col-span-1 doc-container p-6 rounded-lg">
                <h1 class="text-2xl font-black text-white">Calculadora de Product-Market Fit</h1>
                <p class="text-sm highlight-text mt-1">Herramienta de la Fase 3: Tracci√≥n y P-M Fit</p>
                
                <div class="mt-8 space-y-6 text-gray-400 text-sm">
                    <div>
                        <h2 class="font-bold text-slate-300 text-base">üéØ Objetivo</h2>
                        <p class="mt-1">Medir cuantitativamente si tu producto ha alcanzado el Product-Market Fit (PMF), el punto en el que has construido algo que un mercado identificable realmente quiere y necesita.</p>
                    </div>
                    <div>
                        <h2 class="font-bold text-slate-300 text-base">‚≠ê Importancia</h2>
                        <p class="mt-1">El Product-Market Fit es el √∫nico hito que realmente importa para un startup. Antes de tenerlo, tu √∫nico objetivo es conseguirlo. Despu√©s de tenerlo, tu √∫nico objetivo es no perderlo. Esta herramienta te dice si ya puedes pisar el acelerador del crecimiento o si todav√≠a necesitas iterar en tu producto.</p>
                    </div>
                    <div>
                        <h2 class="font-bold text-slate-300 text-base">‚öôÔ∏è ¬øQu√© es lo que hace?</h2>
                        <p class="mt-1">Se basa en el "Test de Sean Ellis". Debes preguntar a tus usuarios: "¬øC√≥mo te sentir√≠as si ya no pudieras usar este producto?". La herramienta calcula el porcentaje de usuarios que responden "Muy decepcionado". Si ese n√∫mero es superior al 40%, es una se√±al muy fuerte de que tienes Product-Market Fit.</p>
                    </div>
                    <div>
                        <h2 class="font-bold text-slate-300 text-base">üí° ¬øPara qu√© me sirve?</h2>
                        <p class="mt-1">Para tomar la decisi√≥n m√°s importante de tu startup: ¬øes momento de escalar o de seguir mejorando el producto? Un resultado positivo te da luz verde para invertir en marketing y ventas. Un resultado bajo te dice que necesitas volver a escuchar a tus clientes y mejorar tu propuesta de valor.</p>
                    </div>
                </div>
            </aside>

            <div class="lg:col-span-2 tool-container p-6 rounded-lg" data-when="granted">
                <div class="flex flex-wrap items-center justify-between pb-4 border-b border-gray-700 gap-4">
                    <h2 class="text-xl font-bold text-white">Mide tu Product-Market Fit</h2>
                     <div class="flex space-x-3">
                        <button class="action-button" onclick="guardar()">üíæ Guardar</button>
                        <button class="action-button" onclick="descargar()">üìÑ Descargar</button>
                        <button class="action-button" onclick="compartir()">üîó Compartir</button>
                    </div>
                </div>

                <div class="mt-6">
                    <h3 class="font-semibold text-white mb-2">Introduce los resultados de tu encuesta</h3>
                    <p class="text-xs text-gray-400 mb-4">Pregunta a tus usuarios: <strong>"¬øC√≥mo te sentir√≠as si ya no pudieras usar nuestro producto?"</strong> e introduce el n√∫mero de respuestas para cada categor√≠a.</p>
                     <div class="bg-gray-900/50 p-4 rounded-lg space-y-4">
                        <div>
                            <label for="very-disappointed" class="text-sm font-semibold text-green-400">1. "Muy decepcionado"</label>
                            <input type="number" id="very-disappointed" class="form-input mt-1" placeholder="N¬∫ de usuarios que respondieron esto">
                        </div>
                        <div>
                            <label for="somewhat-disappointed" class="text-sm font-semibold text-yellow-400">2. "Algo decepcionado"</label>
                            <input type="number" id="somewhat-disappointed" class="form-input mt-1" placeholder="N¬∫ de usuarios que respondieron esto">
                        </div>
                         <div>
                            <label for="not-disappointed" class="text-sm font-semibold text-red-400">3. "Nada decepcionado"</label>
                            <input type="number" id="not-disappointed" class="form-input mt-1" placeholder="N¬∫ de usuarios que respondieron esto">
                        </div>
                    </div>
                </div>
                
                <div class="mt-6">
                     <h3 class="font-semibold text-white mb-4">Resultado</h3>
                     <div id="result-box" class="result-box p-6 rounded-lg text-center transition-all duration-300">
                        <p class="text-sm text-gray-400">Porcentaje de "Muy Decepcionados"</p>
                        <p id="pmf-score" class="text-7xl font-black my-2">0%</p>
                        <p id="pmf-verdict" class="font-semibold text-lg"></p>
                        <p id="pmf-interpretation" class="text-xs text-gray-400 mt-2"></p>
                     </div>
                </div>
            </div>
        </div>
        <div data-when="denied" class="hidden"></div>
    </main>

    <script>
        (function() {
            const veryInput = document.getElementById('very-disappointed');
            const somewhatInput = document.getElementById('somewhat-disappointed');
            const notInput = document.getElementById('not-disappointed');

            const scoreEl = document.getElementById('pmf-score');
            const verdictEl = document.getElementById('pmf-verdict');
            const interpretationEl = document.getElementById('pmf-interpretation');
            const resultBox = document.getElementById('result-box');

            function formatPct(n) {
                return `${Math.round(n)}%`;
            }

            function setClasses(el, add, remove) {
                if (remove && remove.length) el.classList.remove(...remove);
                if (add && add.length) el.classList.add(...add);
            }

            function calculatePMF() {
                const very = parseInt(veryInput.value) || 0;
                const somewhat = parseInt(somewhatInput.value) || 0;
                const not = parseInt(notInput.value) || 0;

                const total = very + somewhat + not;

                if (total === 0) {
                    scoreEl.textContent = '0%';
                    verdictEl.textContent = 'Esperando datos...';
                    interpretationEl.textContent = 'Introduce el n√∫mero de respuestas en cada categor√≠a para calcular tu resultado.';
                    setClasses(resultBox, [], ['border-green-500','border-red-500']);
                    setClasses(verdictEl, ['text-slate-300'], ['text-green-400','text-red-400']);
                    return;
                }

                const pct = (very / total) * 100;
                scoreEl.textContent = formatPct(pct);

                if (pct >= 40) {
                    verdictEl.textContent = '¬°Se√±ales fuertes de Product-Market Fit!';
                    interpretationEl.textContent = 'Puedes empezar a escalar con cuidado: mant√©n el foco en retenci√≥n y calidad de experiencia.';
                    setClasses(resultBox, ['border-green-500'], ['border-red-500']);
                    setClasses(verdictEl, ['text-green-400'], ['text-red-400','text-slate-300']);
                } else {
                    verdictEl.textContent = 'A√∫n no hay PMF';
                    interpretationEl.textContent = 'Itera sobre propuesta de valor, segmentos de cliente y experiencia del producto antes de acelerar.';
                    setClasses(resultBox, ['border-red-500'], ['border-green-500']);
                    setClasses(verdictEl, ['text-red-400'], ['text-green-400','text-slate-300']);
                }
            }

            // Acciones
            window.guardar = function guardar() {
                const data = {
                    very: parseInt(veryInput.value) || 0,
                    somewhat: parseInt(somewhatInput.value) || 0,
                    not: parseInt(notInput.value) || 0,
                    computedAt: new Date().toISOString()
                };
                try {
                    localStorage.setItem('pmf-calculator', JSON.stringify(data));
                    alert('Datos guardados localmente.');
                } catch (_) {
                    alert('No se pudo guardar localmente.');
                }
            }

            window.descargar = function descargar() {
                const data = {
                    very: parseInt(veryInput.value) || 0,
                    somewhat: parseInt(somewhatInput.value) || 0,
                    not: parseInt(notInput.value) || 0,
                };
                const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'pmf_resultados.json';
                document.body.appendChild(a);
                a.click();
                a.remove();
                URL.revokeObjectURL(url);
            }

            window.compartir = async function compartir() {
                const params = new URLSearchParams({
                    very: veryInput.value || '0',
                    some: somewhatInput.value || '0',
                    not: notInput.value || '0'
                }).toString();
                const shareUrl = `${location.origin}${location.pathname}?${params}`;
                try {
                    await navigator.clipboard.writeText(shareUrl);
                    alert('Enlace copiado al portapapeles.');
                } catch (_) {
                    alert(shareUrl);
                }
            }

            // Cargar estado de URL o localStorage
            (function hydrate() {
                const sp = new URLSearchParams(location.search);
                const very = sp.get('very');
                const some = sp.get('some');
                const not = sp.get('not');
                if (very || some || not) {
                    if (very !== null) veryInput.value = very;
                    if (some !== null) somewhatInput.value = some;
                    if (not !== null) notInput.value = not;
                } else {
                    try {
                        const saved = JSON.parse(localStorage.getItem('pmf-calculator') || 'null');
                        if (saved) {
                            veryInput.value = saved.very || 0;
                            somewhatInput.value = saved.somewhat || 0;
                            notInput.value = saved.not || 0;
                        }
                    } catch(_) {}
                }
            })();

            veryInput.addEventListener('input', calculatePMF);
            somewhatInput.addEventListener('input', calculatePMF);
            notInput.addEventListener('input', calculatePMF);

            calculatePMF();
        })();
    </script>
    <script src="../../assets/js/components.js"></script>
</body>
</html>

